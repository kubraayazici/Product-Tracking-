apiVersion: v1
kind: ConfigMap
metadata:
  name: postgresql-config
  namespace: product-tracking
data:
  postgresql.conf: |
    listen_addresses = '*'
    wal_level = replica
    max_wal_senders = 5
    synchronous_commit = off  # Asenkron replikasyon için kapalı
    hot_standby = on
  pg_hba.conf: |
    # Local connections
    local   all             all                                     trust
    host    all             all             127.0.0.1/32            trust
    host    all             all             ::1/128                 trust

    # Replication - Standby nodeların Master'a bağlanabilmesi için
    host    replication     all             0.0.0.0/0               trust
    host    all             all             0.0.0.0/0               trust